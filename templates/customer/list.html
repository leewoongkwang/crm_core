{% extends "base.html" %}

{% block title %}ê³ ê° ëª©ë¡{% endblock %}
{% block page_title %}ê³ ê° ëª©ë¡{% endblock %}

{% block content %}
<!-- âœ… ìƒë‹¨: ê³ ê° ì¶”ê°€ ë²„íŠ¼ -->
<div class="flex justify-between items-center mb-4">
  <h2 class="text-xl font-bold">ğŸ“‹ ê³ ê° ëª©ë¡</h2>
  <a href="/customer/add/" class="bg-blue-600 text-white px-4 py-2 rounded text-sm">+ ì‹ ê·œ ê³ ê° ë“±ë¡</a>
</div>

<!-- âœ… ê²€ìƒ‰/í•„í„° ì˜ì—­ -->
<section class="bg-white p-4 rounded shadow mb-6">
  <form method="get" class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <input type="text" name="search" value="{{ request.GET.search }}" placeholder="ì´ë¦„ or ì „í™”ë²ˆí˜¸" class="border p-2 rounded">
    <select name="grade" class="border p-2 rounded">
      <option value="">ë“±ê¸‰ ì „ì²´</option>
      <option value="ì¶©ì„±" {% if request.GET.grade == "ì¶©ì„±" %}selected{% endif %}>ì¶©ì„±</option>
      <option value="ê°€ë§" {% if request.GET.grade == "ê°€ë§" %}selected{% endif %}>ê°€ë§</option>
      <option value="ìœ ë ¹" {% if request.GET.grade == "ìœ ë ¹" %}selected{% endif %}>ìœ ë ¹</option>
    </select>
    <select name="attribute" class="border p-2 rounded">
      <option value="">ì†ì„± ì „ì²´</option>
      <option value="ì¸ì½œ" {% if request.GET.attribute == "ì¸ì½œ" %}selected{% endif %}>ì¸ì½œ</option>
      <option value="ì¹´ë“œ" {% if request.GET.attribute == "ì¹´ë“œ" %}selected{% endif %}>ì¹´ë“œ</option>
      <option value="ì§€ì¸" {% if request.GET.attribute == "ì§€ì¸" %}selected{% endif %}>ì§€ì¸</option>
    </select>
    <button type="submit" class="bg-blue-600 text-white rounded px-4 py-2">ê²€ìƒ‰</button>
  </form>
</section>

<!-- âœ… ê³ ê° ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸” -->
<section class="bg-white p-4 rounded shadow">
  <table class="w-full text-sm">
    <thead class="bg-gray-100">
      <tr>
        <th class="py-2 px-3 text-left">ì´ë¦„</th>
        <th class="py-2 px-3 text-left">ì „í™”ë²ˆí˜¸</th>
        <th class="py-2 px-3 text-left">ìƒë…„ì›”ì¼</th>
        <th class="py-2 px-3 text-left">ë“±ê¸‰</th>
        <th class="py-2 px-3 text-left">ì†ì„±</th>
        <th class="py-2 px-3 text-left">ìš°ì„ ìˆœìœ„</th>
        <th class="py-2 px-3 text-left">ë“±ë¡ì¼</th>
        <th class="py-2 px-3 text-left">ê´€ë¦¬</th>
      </tr>
    </thead>
    <tbody>
      {% for customer in customers %}
      <tr class="border-t hover:bg-gray-50">
        <td class="py-2 px-3">{{ customer.name }}</td>
        <td class="py-2 px-3">
          {{ customer.phone_encrypted|slice:":3" }}-****-{{ customer.phone_encrypted|slice:"-4:" }}
        </td>
        <td class="py-2 px-3">
          {{ customer.birth_encrypted|slice:":4" }}-{{ customer.birth_encrypted|slice:"4:6" }}-{{ customer.birth_encrypted|slice:"6:8" }}
        </td>
        <td class="py-2 px-3">{{ customer.grade }}</td>
        <td class="py-2 px-3">{{ customer.attribute }}</td>
        <td class="py-2 px-3">{{ customer.priority }}</td>
        <td class="py-2 px-3">{{ customer.created_at|date:"Y-m-d" }}</td>
        <td class="py-2 px-3 space-x-2">
          <a href="/customer/{{ customer.id }}/edit/" class="text-blue-600 text-sm">ìˆ˜ì •</a>
          <a href="/customer/{{ customer.id }}/delete/" class="text-red-600 text-sm">ì‚­ì œ</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="8" class="text-center text-gray-500 py-4">ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
