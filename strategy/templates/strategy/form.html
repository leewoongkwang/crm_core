{% extends "base.html" %}
{% load form_tags %}

{% block title %}ì˜ì—…ë°©í–¥ ì „ëµ ìˆ˜ë¦½{% endblock %}
{% block page_title %}ì˜ì—…ë°©í–¥ ì „ëµ ìˆ˜ë¦½{% endblock %}

{% block content %}
<form method="post">
  {% csrf_token %}

  {% if messages %}
    <div class="mb-4">
      {% for message in messages %}
        <p class="text-green-600 text-sm">{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}

  <!-- ğŸ¯ ì „ëµ ëª©í‘œ ìˆ˜ì¹˜ -->
  <section class="bg-white p-6 rounded shadow mb-6">
    <h2 class="text-lg font-bold mb-4">ğŸ¯ ì „ëµ ëª©í‘œ ìˆ˜ì¹˜</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
      <label class="flex flex-col">ì›” ê³„ì•½ ëª©í‘œ {{ form.monthly_cpc_goal|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì£¼ê°„ ê³„ì•½ ëª©í‘œ {{ form.weekly_cpc_goal|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì¼ì¼ 1ë¶„ì½œ ëª©í‘œ {{ form.daily_call_1min|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì¼ì¼ 2ë¶„ì½œ ëª©í‘œ {{ form.daily_call_2min|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì£¼ê°„ 1ë¶„ì½œ ëª©í‘œ {{ form.weekly_call_1min|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì£¼ê°„ 2ë¶„ì½œ ëª©í‘œ {{ form.weekly_call_2min|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì œì•ˆ ìˆ˜ {{ form.daily_proposals|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ë°©ë¬¸ ì œì•ˆ ìˆ˜ {{ form.daily_visit_proposals|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ë°´ë“œ ì¸ì¦ ìˆ˜ {{ form.daily_band_verified|add_class:"w-full border p-2 rounded" }}</label>
      <label class="flex flex-col">ì¹´ë“œê°€ë§ í™•ë³´ {{ form.daily_grade_potential|add_class:"w-full border p-2 rounded" }}</label>
    </div>
  </section>

  <!-- ğŸ§  ì „ëµ ë©”ëª¨ -->
  <section class="bg-white p-6 rounded shadow mb-6">
    <h2 class="text-lg font-bold mb-2">ğŸ§  ì „ëµ ë©”ëª¨</h2>
    {{ form.memo|add_class:"w-full border p-2 rounded" }}
    <button type="submit" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded">ì €ì¥</button>
  </section>
</form>

<!-- ğŸ“œ ì „ëµ íˆìŠ¤í† ë¦¬ -->
<section class="bg-white p-6 rounded shadow">
  <h2 class="text-lg font-bold mb-4">ğŸ“œ ì „ëµ íˆìŠ¤í† ë¦¬</h2>
  <table class="w-full table-auto text-sm">
    <thead class="bg-gray-100">
      <tr>
        <th class="py-2 px-4">ì—°ë„</th>
        <th class="py-2 px-4">ì›”</th>
        <th class="py-2 px-4">ê³„ì•½ ëª©í‘œ</th>
        <th class="py-2 px-4">ì…ë ¥ì¼</th>
        <th class="py-2 px-4">ë©”ëª¨</th>
      </tr>
    </thead>
    <tbody>
      {% if history %}
        {% for s in history %}
        <tr class="border-t">
          <td class="py-2 px-4">{{ s.year }}</td>
          <td class="py-2 px-4">{{ s.month }}</td>
          <td class="py-2 px-4">{{ s.monthly_cpc_goal }}ê±´</td>
          <td class="py-2 px-4">{{ s.created_at|date:"Y-m-d" }}</td>
          <td class="py-2 px-4">{{ s.memo|default:"-" }}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr class="border-t">
          <td colspan="5" class="py-4 text-center text-gray-500">ì•„ì§ ë“±ë¡ëœ ê³¼ê±° ì „ëµì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>
</section>
{% endblock %}
